<mat-dialog-content>
  <form [formGroup]="form" class="grid">

    <div class="section-card">
      <div class="inner-grid">

        <mat-form-field style="margin-bottom: 15px" appearance="outline">
          <mat-label>Table layout name</mat-label>
          <input matInput formControlName="name">
          <mat-error *ngIf="form.controls.name.hasError('required')">Table layout name is required.</mat-error>
          <mat-error *ngIf="form.controls.name.value && form.controls.name.hasError('nameExists')">Table layout with that name already exists.</mat-error>
        </mat-form-field>


        <div class="color-picker-div">
          <p style="width: 135px;"><b>Background color :</b></p>
          <input
            [(colorPicker)]="selectedColor"
            [style.background]="selectedColor"
            class="colorPickerClass"
            [cpDisableInput]="true"
            readonly
          />
        </div>
        <!-- Image preview / clickable uploader -->
        <div class="image-wrapper">
          <img
            [src]="imageUrl"
            alt="Upload preview"
            class="image-uploader"
            (click)="fileInput.click()"
          />
        </div>


        <!-- Hidden file input -->
        <input
          type="file"
          #fileInput
          accept="image/*"
          style="display: none"
          (change)="onFileSelected($event)"
        />

        <div style="margin-top: 20px; text-align: center;">
          <button
            mat-stroked-button
            color="warn"
            (click)="removeBackgroundImage()"
            [disabled]="!imageUrl">
            Remove background
          </button>
        </div>



      </div>
    </div>

  </form>
</mat-dialog-content>


<mat-dialog-actions align="end">
  <button mat-button (click)="cancel()">Cancel</button>
  <button mat-flat-button color="primary" (click)="save()" [disabled]="form.invalid || loading">
    Save
  </button>
</mat-dialog-actions>
